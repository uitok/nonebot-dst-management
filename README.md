# nonebot-dst-management

> ä¸€ä¸ªå®ç”¨çš„ DST é¥¥è’è”æœºç‰ˆæœåŠ¡å™¨ç®¡ç†æ’ä»¶

åŸºäº NoneBot2 å’Œ DMP API å®ç°ï¼Œæä¾›æˆ¿é—´ç®¡ç†ã€ç©å®¶ç®¡ç†ã€æ¨¡ç»„ç®¡ç†ã€å¤‡ä»½ç®¡ç†ç­‰åŠŸèƒ½ï¼Œå¹¶å†…ç½® AI æ™ºèƒ½åŠ©æ‰‹ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ  **æˆ¿é—´ç®¡ç†** - å¯åŠ¨ã€åœæ­¢ã€é‡å¯æœåŠ¡å™¨
- ğŸ‘¥ **ç©å®¶ç®¡ç†** - è¸¢äººã€ç¦è¨€ã€ç®¡ç†ç™½åå•
- ğŸ“¦ **æ¨¡ç»„ç®¡ç†** - æœç´¢ã€å®‰è£…ã€é…ç½®æ¨¡ç»„
- ğŸ’¾ **å¤‡ä»½ç®¡ç†** - åˆ›å»ºã€æ¢å¤ã€ç®¡ç†å­˜æ¡£å¤‡ä»½
- ğŸ¤– **AI åŠ©æ‰‹** - é…ç½®åˆ†æã€æ¨¡ç»„æ¨èã€æ™ºèƒ½é—®ç­”
- ğŸŒ **ä¸­æ–‡å‘½ä»¤** - æ”¯æŒä¸­æ–‡å‘½ä»¤åˆ«å
- âš¡ **é»˜è®¤æˆ¿é—´** - è®¾ç½®å¸¸ç”¨æˆ¿é—´ï¼Œçœç•¥å‚æ•°

## å®‰è£…

```bash
nb plugin install nonebot-plugin-dst-management
```

æˆ–ä½¿ç”¨ pipï¼š

```bash
pip install nonebot-plugin-dst-management
```

## é…ç½®

åœ¨ NoneBot é¡¹ç›®çš„ `.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```bash
# DMP API é…ç½®
DST_API_URL=http://your-dmp-api-url
DST_API_TOKEN=your_jwt_token
DST_TIMEOUT=10

# ç®¡ç†å‘˜é…ç½®
DST_ADMIN_USERS=["your_qq_number"]
```

## å¿«é€Ÿå¼€å§‹

### 1. æˆ¿é—´ç®¡ç†

```bash
/dst list              # æŸ¥çœ‹æˆ¿é—´åˆ—è¡¨
/dst info 2            # æŸ¥çœ‹æˆ¿é—´ 2 çš„è¯¦æƒ…
/dst start 2           # å¯åŠ¨æˆ¿é—´
```

### 2. ç©å®¶ç®¡ç†

```bash
/dst ç©å®¶åˆ—è¡¨ 2        # æŸ¥çœ‹åœ¨çº¿ç©å®¶
/dst è¸¢å‡ºç©å®¶ 2 KU_xxx # è¸¢å‡ºç©å®¶
```

### 3. æ¨¡ç»„ç®¡ç†

```bash
/dst æ¨¡ç»„æœç´¢ å¥åº·æ¡   # æœç´¢æ¨¡ç»„
/dst æ¨¡ç»„åˆ—è¡¨ 2        # æŸ¥çœ‹å·²å®‰è£…æ¨¡ç»„
/dst æ·»åŠ æ¨¡ç»„ 2 1 123456789  # å®‰è£…æ¨¡ç»„
```

### 4. é»˜è®¤æˆ¿é—´

```bash
/dst é»˜è®¤æˆ¿é—´ 2        # è®¾ç½®é»˜è®¤æˆ¿é—´
/dst ç©å®¶åˆ—è¡¨          # ä¹‹åå¯ä»¥çœç•¥æˆ¿é—´ ID
```

### 5. AI åŠŸèƒ½

```bash
/dst ask å†¬å¤©åŸºåœ°æ€ä¹ˆæ­ï¼Ÿ     # æ™ºèƒ½é—®ç­”
/dst æ¨¡ç»„æ¨è 2 ç”Ÿå­˜          # AI æ¨¡ç»„æ¨è
```

## å‘½ä»¤åˆ—è¡¨

### æˆ¿é—´ç®¡ç†

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/dst list [é¡µç ]` | æŸ¥çœ‹æˆ¿é—´åˆ—è¡¨ |
| `/dst info <æˆ¿é—´ID>` | æŸ¥çœ‹æˆ¿é—´è¯¦æƒ… |
| `/dst start <æˆ¿é—´ID>` | å¯åŠ¨æˆ¿é—´ ğŸ”’ |
| `/dst stop <æˆ¿é—´ID>` | åœæ­¢æˆ¿é—´ ğŸ”’ |
| `/dst restart <æˆ¿é—´ID>` | é‡å¯æˆ¿é—´ ğŸ”’ |

**ä¸­æ–‡åˆ«å**ï¼š
- `/dst æˆ¿é—´åˆ—è¡¨` â†’ list
- `/dst æˆ¿é—´è¯¦æƒ…` â†’ info

### ç©å®¶ç®¡ç†

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/dst players <æˆ¿é—´ID>` | æŸ¥çœ‹åœ¨çº¿ç©å®¶ |
| `/dst kick <æˆ¿é—´ID> <KU_ID>` | è¸¢å‡ºç©å®¶ ğŸ”’ |

**ä¸­æ–‡åˆ«å**ï¼š
- `/dst ç©å®¶åˆ—è¡¨` â†’ players
- `/dst è¸¢å‡ºç©å®¶` â†’ kick

### æ¨¡ç»„ç®¡ç†

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/dst mod search <å…³é”®è¯>` | æœç´¢æ¨¡ç»„ |
| `/dst mod list <æˆ¿é—´ID>` | æŸ¥çœ‹å·²å®‰è£…æ¨¡ç»„ |
| `/dst mod add <æˆ¿é—´ID> <ä¸–ç•ŒID> <æ¨¡ç»„ID>` | æ·»åŠ æ¨¡ç»„ ğŸ”’ |
| `/dst mod remove <æˆ¿é—´ID> <ä¸–ç•ŒID> <æ¨¡ç»„ID>` | åˆ é™¤æ¨¡ç»„ ğŸ”’ |
| `/dst mod check <æˆ¿é—´ID>` | æ£€æµ‹æ¨¡ç»„å†²çª |

**ä¸­æ–‡åˆ«å**ï¼š
- `/dst æ¨¡ç»„æœç´¢` â†’ mod search
- `/dst æ¨¡ç»„åˆ—è¡¨` â†’ mod list
- `/dst æ·»åŠ æ¨¡ç»„` â†’ mod add
- `/dst ç§»é™¤æ¨¡ç»„` â†’ mod remove
- `/dst æ£€æµ‹æ¨¡ç»„` â†’ mod check

### å¤‡ä»½ç®¡ç†

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/dst backup list <æˆ¿é—´ID>` | æŸ¥çœ‹å¤‡ä»½åˆ—è¡¨ |
| `/dst backup create <æˆ¿é—´ID>` | åˆ›å»ºå¤‡ä»½ ğŸ”’ |
| `/dst backup restore <æˆ¿é—´ID> <æ–‡ä»¶å>` | æ¢å¤å¤‡ä»½ ğŸ”’ |

**ä¸­æ–‡åˆ«å**ï¼š
- `/dst å¤‡ä»½åˆ—è¡¨` â†’ backup list
- `/dst åˆ›å»ºå¤‡ä»½` â†’ backup create
- `/dst æ¢å¤å¤‡ä»½` â†’ backup restore

### é»˜è®¤æˆ¿é—´

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/dst é»˜è®¤æˆ¿é—´ <æˆ¿é—´ID>` | è®¾ç½®é»˜è®¤æˆ¿é—´ |
| `/dst æŸ¥çœ‹é»˜è®¤` | æŸ¥çœ‹é»˜è®¤æˆ¿é—´ |
| `/dst æ¸…é™¤é»˜è®¤` | æ¸…é™¤é»˜è®¤æˆ¿é—´è®¾ç½® |

### AI åŠŸèƒ½

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/dst analyze <æˆ¿é—´ID>` | AI é…ç½®åˆ†æ |
| `/dst mod recommend <æˆ¿é—´ID> [ç±»å‹]` | AI æ¨¡ç»„æ¨è |
| `/dst mod parse <æˆ¿é—´ID> <ä¸–ç•ŒID>` | AI æ¨¡ç»„é…ç½®è§£æ |
| `/dst archive analyze <æ–‡ä»¶>` | AI å­˜æ¡£åˆ†æ |
| `/dst ask <é—®é¢˜>` | AI æ™ºèƒ½é—®ç­” |

ğŸ”’ æ ‡è®°çš„å‘½ä»¤éœ€è¦ç®¡ç†å‘˜æƒé™

## ä½¿ç”¨æŠ€å·§

### è®¾ç½®é»˜è®¤æˆ¿é—´

å¦‚æœä¸»è¦ç®¡ç†æŸä¸€ä¸ªæˆ¿é—´ï¼Œå¯ä»¥è®¾ç½®é»˜è®¤æˆ¿é—´ï¼š

```bash
/dst é»˜è®¤æˆ¿é—´ 2
```

ä¹‹åå¤§éƒ¨åˆ†å‘½ä»¤å¯ä»¥çœç•¥æˆ¿é—´ IDï¼š

```bash
/dst ç©å®¶åˆ—è¡¨          # ç›¸å½“äº /dst players 2
/dst æ¨¡ç»„åˆ—è¡¨          # ç›¸å½“äº /dst mod list 2
/dst åˆ›å»ºå¤‡ä»½          # ç›¸å½“äº /dst backup create 2
```

### ä½¿ç”¨ä¸­æ–‡å‘½ä»¤

æ‰€æœ‰é«˜é¢‘å‘½ä»¤éƒ½æ”¯æŒä¸­æ–‡åˆ«åï¼š

```bash
# è‹±æ–‡å‘½ä»¤
/dst mod list 2

# ä¸­æ–‡å‘½ä»¤
/dst æ¨¡ç»„åˆ—è¡¨ 2
```

æ•ˆæœå®Œå…¨ä¸€æ ·ï¼Œç”¨å“ªä¸ªçœ‹ä½ ä¹ æƒ¯ã€‚

### ç»„åˆä½¿ç”¨

é»˜è®¤æˆ¿é—´ + ä¸­æ–‡å‘½ä»¤ = è¶…ç®€æ´ï¼š

```bash
/dst é»˜è®¤æˆ¿é—´ 2
/dst ç©å®¶åˆ—è¡¨          # æŸ¥çœ‹æˆ¿é—´ 2 çš„ç©å®¶
/dst æ¨¡ç»„åˆ—è¡¨          # æŸ¥çœ‹æˆ¿é—´ 2 çš„æ¨¡ç»„
/dst åˆ›å»ºå¤‡ä»½          # ä¸ºæˆ¿é—´ 2 åˆ›å»ºå¤‡ä»½
```

## ç¯å¢ƒè¦æ±‚

- Python 3.10+
- NoneBot2 2.3.0+
- DMP API æœåŠ¡å™¨

## ä¾èµ–å®‰è£…

```bash
pip install nonebot2[fastapi]
pip install nonebot-plugin-dst-management
```

## å¼€å‘

```bash
git clone https://github.com/uitok/nonebot-dst-management.git
cd nonebot-dst-management
python -m venv .venv
source .venv/bin/activate
pip install -e ".[dev]"
pytest
```

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•è·å– DMP API Tokenï¼Ÿ

A: ç™»å½•ä½ çš„ DMP ç®¡ç†åå°ï¼Œåœ¨è®¾ç½®ä¸­æ‰¾åˆ° API Tokenã€‚

### Q: AI åŠŸèƒ½æ€ä¹ˆé…ç½®ï¼Ÿ

A: AI åŠŸèƒ½æ˜¯å¯é€‰çš„ã€‚å¦‚æœéœ€è¦ï¼Œåœ¨ `.env` ä¸­æ·»åŠ ï¼š

```bash
AI_ENABLED=true
AI_PROVIDER=openai
AI_API_KEY=your_openai_key
AI_MODEL=gpt-4
```

### Q: é»˜è®¤æˆ¿é—´ä¿å­˜åœ¨å“ªé‡Œï¼Ÿ

A: å½“å‰ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œé‡å¯åéœ€è¦é‡æ–°è®¾ç½®ã€‚åç»­ç‰ˆæœ¬ä¼šæ”¯æŒæŒä¹…åŒ–å­˜å‚¨ã€‚

## æ›´æ–°æ—¥å¿—

### v0.3.1 (2026-02-05)

- æ–°å¢é»˜è®¤æˆ¿é—´åŠŸèƒ½
- æ–°å¢ 24 ä¸ªä¸­æ–‡å‘½ä»¤åˆ«å
- AI è¯Šæ–­æ¨¡å¼å¢å¼º
- æµ‹è¯•è¦†ç›–ç‡æå‡è‡³ 70%+

### v0.3.0 (2026-02-04)

- 5 ä¸ª AI æ™ºèƒ½å‘½ä»¤
- Lua è§£æå®‰å…¨ä¿®å¤
- æ¨èç»“æœéªŒè¯

æŸ¥çœ‹å®Œæ•´æ›´æ–°æ—¥å¿—ï¼š[CHANGELOG.md](CHANGELOG.md)

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## é“¾æ¥

- [GitHub](https://github.com/uitok/nonebot-dst-management)
- [æ–‡æ¡£](https://github.com/uitok/nonebot-dst-management/blob/main/docs/README.md)
- [é—®é¢˜åé¦ˆ](https://github.com/uitok/nonebot-dst-management/issues)
